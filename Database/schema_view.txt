xquery version "1.0-ml";
import module namespace tde = "http://marklogic.com/xdmp/tde" 
        at "/MarkLogic/tde.xqy";

let $linkPersonView :=
<template xmlns="http://marklogic.com/xdmp/tde">
  <description>schema link person</description>
  <context>/LinkPerson</context>
   <collections>
        <collection>models.LinkPerson</collection>
  </collections>
  <rows>
    <row>
      <schema-name>Link</schema-name>
      <view-name>Persons</view-name>
      <columns>
        <column>
          <name>id</name>
          <scalar-type>string</scalar-type>
          <val>id</val>
        </column>
        <column>
          <name>idPersonPrimary</name>
          <scalar-type>string</scalar-type>
          <val>idPersonPrimary</val>
        </column>
        <column>
          <name>idPersonSecondary</name>
          <scalar-type>string</scalar-type>
          <val>idPersonSecondary</val>
        </column>
        <column>
          <name>date</name>
          <scalar-type>long</scalar-type>
          <val>date</val>
        </column>
        <column>
          <name>dateStr</name>
          <scalar-type>string</scalar-type>
          <val>dateStr</val>
        </column>
      </columns>
    </row>
  </rows>
</template>

return tde:template-insert("linkPersonView.xml", $linkPersonView)